"use strict";(self.webpackChunkelsalamapp=self.webpackChunkelsalamapp||[]).push([[461],{4209:(e,t,i)=>{i.d(t,{Z:()=>m});var n,o=i(2791),a=i(4826),c=i(168),r=i(225),s=i(5353);const l=(0,r.Z)(s.Z)(n||(n=(0,c.Z)(["\n  width: 100%;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  margin: 0;\n  background-color: white;\n  transition: border-color 0.3s;\n  box-sizing: border-box;\n\n  &:focus {\n    outline: none !important;\n    border-color: #007bff;\n  }\n"])));var _=i(184);const d=e=>{let{height:t="65px",width:i="200px",options:n,onChange:o,label:c,value:r,name:s,margin:d,padding:m,onSearch:u,hidden:h,disabled:v,loading:g,mode:p}=e;return(0,_.jsx)(a.Z,{label:c,hasContent:r&&r.toString(),margin:d,padding:m,height:t,width:i,hidden:h,top:"7px",children:(0,_.jsx)(l,{options:n,bordered:!1,allowClear:!0,showSearch:!0,onSearch:u,onChange:(e,t)=>{o({name:s,value:e,option:t})},filterOption:!1,loading:g,disabled:g||v,mode:p,placeholder:""})})},m=(0,o.memo)(d)},6888:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(2791),o=i(4209),a=i(890),c=i(184);const r=e=>{let{width:t,api:i,onChange:r,label:s,name:l="",value:_=0,withLabel:d=!1,padding:m,margin:u,params:h,selectLabelName:v="label_select",...g}=e;const{data:p,runFetch:b,loading:x}=(0,a.Z)({link:i,fetchOnFirstRun:!0,params:h,checkForParams:!0}),w=(0,n.useCallback)((e=>{}),[]);return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(o.Z,{options:p,onChange:r,label:s,value:_,name:l,width:t,withLabel:d,margin:u,padding:m,selectLabelName:v,onSearch:w,loading:x,...g})})},s=(0,n.memo)(r)},8216:(e,t,i)=>{i.d(t,{Z:()=>v});var n,o=i(2791),a=i(7892),c=i.n(a),r=i(4826),s=i(168),l=i(225),_=i(1535);const d=(0,l.Z)(_.Z)(n||(n=(0,s.Z)(["\n  ","\n  width: 100%;\n"])),(e=>{let{required:t}=e;return t&&"border: 1px solid red;"})),m={fullDate:"YYYY-MM-DD",weakDate:"MM-DD",monthFormat:"YYYY-MM",fullDateWithTime:"YYYY-MM-DD HH:mm:ss",fullDateWithTimeNoSecond:"YYYY-MM-DD HH:mm"};var u=i(184);const h=e=>{let{dateFormat:t="fullDate",label:i,value:n,width:o="200px",height:a,padding:s,margin:l,name:_,onChange:h,required:v=!1,showTime:g,...p}=e;const b=n?c()(n,m[t]):void 0;return(0,u.jsx)(r.Z,{label:i,width:o,height:a,padding:s,margin:l,hasContent:b&&(null===b||void 0===b?void 0:b.toString()),top:"7px",children:(0,u.jsx)(d,{defaultValue:b,value:b,format:m[t],showTime:g,width:"100%",onChange:(e,t)=>{h&&h({name:_,value:t})},placeholder:"",required:v,...p})})},v=(0,o.memo)(h)},4826:(e,t,i)=>{i.d(t,{Z:()=>u});var n,o,a=i(2791),c=i(9230),r=i(168),s=i(225);const l=s.Z.div(n||(n=(0,r.Z)(["\n  position: relative;\n  margin: ",";\n  padding: ",";\n  height: ",";\n  width: ",";\n"])),(e=>{let{margin:t}=e;return t}),(e=>{let{padding:t}=e;return t||"5px 0"}),(e=>{let{height:t}=e;return t}),(e=>{let{width:t}=e;return t})),_=s.Z.label(o||(o=(0,r.Z)(["\n  position: absolute;\n  top: ",";\n  left: 10px;\n  color: #999;\n  padding: 0;\n  margin: 0;\n  transition: top 0.3s, font-size 0.3s, background-color 0.5s;\n\n  ","\n"])),(e=>{let{top:t}=e;return t||"5px"}),(e=>{let{hasContent:t}=e;return t&&"\n    top: -5px;\n    font-size: 12px;\n    color: #007bff;\n    font-size: 14px;\n    background-color: white;\n  "}));var d=i(184);const m=e=>{let{hasContent:t,name:i,label:n="",height:o,width:a="200px",padding:r,margin:s,children:m,hidden:u,top:h}=e;const{t:v}=(0,c.$G)();return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(l,{width:a,height:o,margin:s,padding:r,hidden:u,children:[m,(0,d.jsx)(_,{top:h,htmlFor:i,hasContent:t,children:v(n)})]})})},u=(0,a.memo)(m)},5848:(e,t,i)=>{i.d(t,{_8:()=>o});const n=new Date,o="".concat(n.getFullYear(),"-").concat((n.getMonth()+1).toString().padStart(2,"0"),"-").concat(n.getDate().toString().padStart(2,"0")),a="".concat(n.getHours().toString().padStart(2,"0"),":").concat(n.getMinutes().toString().padStart(2,"0"),":").concat(n.getSeconds().toString().padStart(2,"0"));"".concat(o," ").concat(a)},3388:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(2791);const o=e=>{const t=(0,n.useRef)();return(0,n.useEffect)((()=>{t.current=e})),t.current},a=e=>{let{initialValues:t}=e;const[i,a]=(0,n.useState)(t),c=(0,n.useRef)(!1),r=o(t),s=(0,n.useCallback)((()=>!Object.is(JSON.stringify(r),JSON.stringify(t))),[t,r]);(0,n.useEffect)((()=>{s()&&a({...t})}),[s,t]);const l=(0,n.useCallback)((()=>{c.current=!1,a((()=>t))}),[t]);(0,n.useEffect)((()=>l),[]);const _=(0,n.useCallback)((e=>{const{name:t,value:n}=e;a({...i,[t]:n})}),[i]),d=(0,n.useCallback)((e=>{a({...i,...e})}),[i]),m=(0,n.useCallback)((e=>{a({...i,[e.name]:e.value,[e.selectLabelName]:e.label})}),[i]),u=(0,n.useCallback)((e=>{let{name:t,value:n}=e;a({...i,[t]:[...i[t],n]})}),[i]);return{state:i,onChange:_,resetForm:l,handleRootState:a,handleSelectWithLabelChange:m,handleArrayChange:u,handleMultiInput:d}}},4082:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(2791),o=i(1227),a=i(399),c=i(8382);const r=e=>{let{link:t="",noAuthorization:i=!1,additionalFunctionToRun:r,runOnSuccess:s,runOnFail:l,method:_="POST"}=e;const d=(0,c.p)(),m="http://192.168.1.250:5000/api/".concat(a.Z[t]),[u,h]=(0,n.useState)(),{authorization:v}=(0,o.Z)(),g=(0,n.useCallback)((async e=>{if(v||i){const i={method:_,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(v)},body:JSON.stringify(e)};try{const e=await fetch(m,i),t=await e.json();return"success"===t.response?(d({position:"top-right",title:"Success",description:"".concat(t.response),status:"success",duration:5e3,isClosable:!0}),s&&s()):(d({position:"top-right",title:"Error",description:"".concat(t.message),status:"error",duration:9e3,isClosable:!0}),l&&l()),h(t),r&&r(),t}catch(t){}}}),[r,v,_,i,l,s,d,m]);return{success:u,setRow:(0,n.useCallback)((e=>{g(e)}),[g])}}},1561:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(2791),o=i(8382);const a=e=>{let{validateFelids:t,functionToRun:i,stateToValidate:a}=e;const c=(0,o.p)();return(0,n.useCallback)((()=>{let e=[];t.forEach((t=>{void 0===a[t]||a[t]||e.push(t)})),0!==e.length?c({position:"top-right",title:"Error",description:"\n      Make sure to fill this required fields\n      ".concat(e.toString(),"\n      "),status:"info",duration:5e3,isClosable:!0}):i()}),[i,a,c,t])}},9242:(e,t,i)=>{i.d(t,{Z:()=>u});var n,o=i(2791),a=i(4826),c=i(168),r=i(225),s=i(4184),l=i(4360);const _=(0,r.Z)(s.Z)(n||(n=(0,c.Z)(["\n  width: 100%;\n  /* padding: 5px 7px; */\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  transition: border-color 0.3s;\n  margin: 0;\n  box-sizing: border-box;\n  /* ","; */\n\n  &:focus {\n    outline: none !important;\n    border-color: #007bff;\n  }\n"])),(e=>{let{required:t}=e;return t&&"background-color:  ".concat(l.w.required)}));var d=i(184);const m=e=>{let{disabled:t,value:i,name:n,label:c,onChange:r,height:s,width:l="200px",padding:m,margin:u,max:h,min:v=0,...g}=e;const p=(0,o.useCallback)((e=>{r({name:n,value:e})}),[n,r]);return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(a.Z,{label:c,width:l,height:s,padding:m,margin:u,hasContent:i&&i.toString(),top:"7px",children:(0,d.jsx)(_,{disabled:t,value:i,name:n,onChange:p,padding:m,margin:u,max:h,min:v,...g})})})},u=(0,o.memo)(m)},9457:(e,t,i)=>{i.d(t,{Z:()=>m});var n,o=i(2791),a=i(4826),c=i(168),r=i(225),s=i(4360);const l=r.Z.input(n||(n=(0,c.Z)(["\n  width: 100%;\n  padding: 5px 7px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n\n  transition: border-color 0.3s;\n  box-sizing: border-box;\n  /* ","; */\n\n  &:focus {\n    outline: none !important;\n    border-color: #007bff;\n  }\n"])),(e=>{let{required:t}=e;return t&&"background-color:  ".concat(s.w.required)}));var _=i(184);const d=e=>{let{disabled:t,value:i,name:n,label:c="",onChange:r,height:s,width:d="200px",type:m="text",placeHolder:u,padding:h,margin:v,className:g,required:p,...b}=e;const x=(0,o.useCallback)((e=>{r({name:n,value:e.target.value})}),[n,r]);return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(a.Z,{label:c,hasContent:i&&i.toString(),margin:v,padding:h,height:s,width:d,children:(0,_.jsx)(l,{placeholder:u,disabled:t,required:p,onChange:x,width:"100%",className:g,value:i,type:m,...b})})})},m=(0,o.memo)(d)},9461:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Z});var n=i(2791),o=i(9242),a=i(3388),c=i(4082),r=i(1561),s=i(6903),l=i(5410),_=i(6888),d=i(8216),m=i(81),u=i(9457),h=i(184);const v=e=>{let{onChange:t,state:i,handleItemMultiInput:a,handleSelectWithLabelChange:c}=e;const r=(0,n.useCallback)((e=>{let{name:t,value:n}=e;a({[t]:n,customer_invoice_item_size:+(+n*+i.customer_invoice_item_height).toFixed(2),customer_invoice_item_total:(+n*+i.customer_invoice_item_height*+i.customer_invoice_item_quantity*+i.customer_invoice_item_price).toFixed(2)})}),[a,i.customer_invoice_item_height,i.customer_invoice_item_price,i.customer_invoice_item_quantity]),s=(0,n.useCallback)((e=>{let{name:t,value:n}=e;a({[t]:n,customer_invoice_item_size:+(+n*+i.customer_invoice_item_width).toFixed(2),customer_invoice_item_total:(+n*+i.customer_invoice_item_width*+i.customer_invoice_item_quantity*+i.customer_invoice_item_price).toFixed(2)})}),[a,i.customer_invoice_item_price,i.customer_invoice_item_quantity,i.customer_invoice_item_width]),d=(0,n.useCallback)((e=>{let{name:t,value:n}=e;a({[t]:n,customer_invoice_item_total:+n*+i.customer_invoice_item_price*+i.customer_invoice_item_size})}),[a,i.customer_invoice_item_price,i.customer_invoice_item_size]),m=(0,n.useCallback)((e=>{let{name:t,value:n}=e;a({[t]:n,customer_invoice_item_total:+i.customer_invoice_item_quantity*+n*+i.customer_invoice_item_size})}),[a,i.customer_invoice_item_quantity,i.customer_invoice_item_size]);return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(l.Z,{width:"100%",flexDirection:"column",margin:"0",padding:"0",children:[(0,h.jsxs)(l.Z,{margin:"0",padding:"0",gap:"5px",children:[(0,h.jsx)(_.Z,{api:"QUERY_PRINT_OPTIONS_LIST",onChange:c,value:i.customer_invoice_print_option_id,label:"prntnm",name:"customer_invoice_print_option_id",withLabel:!0,fetchOnFirstRun:!0,selectLabelName:"print_name",width:"15%"}),(0,h.jsx)(_.Z,{api:"QUERY_ITEMS_LIST",onChange:c,value:i.customer_invoice_item_id,label:"itmnm",name:"customer_invoice_item_id",withLabel:!0,fetchOnFirstRun:!0,selectLabelName:"item_name",width:"15%"})]}),(0,h.jsxs)(l.Z,{margin:"0",padding:"0",gap:"5px",children:[(0,h.jsx)(o.Z,{name:"customer_invoice_item_width",value:i.customer_invoice_item_width,label:"wdth",onChange:r,width:"13%"}),(0,h.jsx)(o.Z,{name:"customer_invoice_item_height",value:i.customer_invoice_item_height,label:"hght",onChange:s,width:"13%"}),(0,h.jsx)(o.Z,{name:"customer_invoice_item_size",value:i.customer_invoice_item_size,label:"sz",onChange:t,disabled:!0,width:"13%"}),(0,h.jsx)(o.Z,{name:"customer_invoice_item_quantity",value:i.customer_invoice_item_quantity,label:"qnty",onChange:d,width:"13%"}),(0,h.jsx)(o.Z,{name:"customer_invoice_item_price",value:i.customer_invoice_item_price,label:"prc",onChange:m,width:"13%"}),(0,h.jsx)(o.Z,{name:"customer_invoice_item_total",value:i.customer_invoice_item_total,label:"total",onChange:t,disabled:!0,width:"13%"}),(0,h.jsx)(u.Z,{name:"customer_invoice_item_notes",value:i.customer_invoice_item_notes,label:"nts",onChange:t,width:"15%"})]})]})})},g=(0,n.memo)(v);const p={customer_id:void 0,customer_invoice_date:i(5848)._8,customer_invoice_items:[],query_status:"n",customer_invoice_total:void 0,customer_invoice_discount:void 0,customer_invoice_after_discount:void 0,customer_invoice_paid:void 0,customer_invoice_credit:void 0,customer_invoice_design_fee:void 0},b={customer_invoice_print_option_id:void 0,customer_invoice_item_id:void 0,customer_invoice_item_width:void 0,customer_invoice_item_height:void 0,customer_invoice_item_size:void 0,customer_invoice_item_quantity:void 0,customer_invoice_item_price:void 0,customer_invoice_item_total:void 0,customer_invoice_item_notes:"",item_name:"",print_name:""},x=["customer_id","customer_invoice_date","customer_invoice_items","customer_invoice_total","customer_invoice_after_discount"],w=["customer_invoice_item_id","customer_invoice_item_width","customer_invoice_item_height","customer_invoice_item_size","customer_invoice_item_quantity","customer_invoice_item_price","customer_invoice_item_total"],C=[{title:"prntnm",width:"20%",dataIndex:"print_name"},{title:"itmnm",width:"20%",dataIndex:"item_name"},{title:"wdth",width:"5%",dataIndex:"customer_invoice_item_width"},{title:"hght",width:"5%",dataIndex:"customer_invoice_item_height"},{title:"sz",width:"5%",dataIndex:"customer_invoice_item_size"},{title:"qnty",width:"5%",dataIndex:"customer_invoice_item_quantity"},{title:"prc",width:"7%",dataIndex:"customer_invoice_item_price"},{title:"total",width:"10%",dataIndex:"customer_invoice_item_total"},{title:"nts",width:"10%",dataIndex:"customer_invoice_item_notes"}],f=()=>{const{state:{customer_invoice_items:e,customer_invoice_design_fee:t,customer_invoice_discount:i,customer_invoice_paid:u,customer_invoice_total:v,customer_invoice_after_discount:f,customer_invoice_item_total:Z,customer_id:j,customer_invoice_date:S,customer_invoice_credit:k},onChange:y,resetForm:F,handleMultiInput:I,handleArrayChange:q}=(0,a.Z)({initialValues:p}),{state:T,onChange:z,handleMultiInput:M,handleSelectWithLabelChange:Y,resetForm:O}=(0,a.Z)({initialValues:{...b,rowKey:e.length+1}}),{setRow:R}=(0,c.Z)({link:"POST_CUSTOMER_INVOICE_DETAILS",runOnSuccess:F}),D=(0,n.useCallback)((()=>{q({name:"customer_invoice_items",value:T});let n=0;e.forEach((e=>{n+=+e.customer_invoice_item_total}));const o=n+T.customer_invoice_item_total;I({customer_invoice_items:[...e,T],customer_invoice_total:o,customer_invoice_after_discount:o+t-i,customer_invoice_credit:o+t-i-u}),O()}),[T,t,i,e,u,q,I,O]),L=(0,n.useCallback)((e=>{let{name:t,value:n}=e;I({[t]:+n,customer_invoice_after_discount:v+ +n-i,customer_invoice_credit:v+ +n-u-i})}),[i,u,v,I]),E=(0,n.useCallback)((e=>{let{name:i,value:n}=e;I({[i]:+n,customer_invoice_after_discount:v+t-+n,customer_invoice_credit:v+t-u-+n})}),[t,u,v,I]),N=(0,n.useCallback)((e=>{let{name:t,value:i}=e;I({[t]:+i,customer_invoice_credit:f-+i})}),[f,I]),A=(0,n.useCallback)((()=>{R({customer_invoice_items:e,customer_invoice_design_fee:t,customer_invoice_discount:i,customer_invoice_total:v,customer_invoice_paid:u,customer_invoice_after_discount:f,customer_invoice_item_total:Z,customer_id:j,customer_invoice_date:S,customer_invoice_credit:k})}),[j,f,k,S,t,i,Z,e,u,v,R]),V=[{icon:"clear",onClick:F}],H=(0,r.Z)({validateFelids:w,functionToRun:D,stateToValidate:T}),W=(0,r.Z)({validateFelids:x,functionToRun:A,stateToValidate:{customer_invoice_items:e,customer_invoice_design_fee:t,customer_invoice_discount:i,customer_invoice_paid:u,customer_invoice_total:v,customer_invoice_after_discount:f,customer_invoice_item_total:Z,customer_id:j,customer_invoice_date:S,customer_invoice_credit:k}}),P=[{label:"delete",onClick:t=>{const n=e.filter((e=>t.rowKey!==e.rowKey)),o=v-Z;I({customer_invoice_items:n,customer_invoice_total:o,customer_invoice_after_discount:o-i,customer_invoice_credit:o-i-u})},width:"100%",margin:"0",padding:"0"}];return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(l.Z,{flexDirection:"column",width:"100%",children:[(0,h.jsxs)(l.Z,{margin:"0",padding:"0",gap:"5px",children:[(0,h.jsx)(_.Z,{api:"QUERY_CUSTOMERS_LIST",onChange:y,value:j,label:"cstmr",name:"customer_id",fetchOnFirstRun:!0,width:"15%"}),(0,h.jsx)(d.Z,{name:"customer_invoice_date",value:S,label:"dt",onChange:y,width:"15%"})]}),(0,h.jsx)(g,{state:T,onChange:z,handleItemMultiInput:M,handleSelectWithLabelChange:Y}),(0,h.jsx)(s.Z,{columns:C,dataSource:e,actionColumn:P,actionLabel:"del",hideTools:!1,onAdd:H,actionWidth:100,fixedHeight:"250px",noPagination:!0,canAdd:!0,additionalButtons:V}),(0,h.jsxs)(l.Z,{width:"100%",justifyContent:"space-around",children:[(0,h.jsx)(o.Z,{name:"customer_invoice_total",disabled:!0,value:v,label:"total",width:"13%"}),(0,h.jsx)(o.Z,{name:"customer_invoice_design_fee",value:t,onChange:L,label:"dsgnfe",width:"13%"}),(0,h.jsx)(o.Z,{name:"customer_invoice_discount",value:i,label:"dscnt",onChange:E,width:"13%"}),(0,h.jsx)(o.Z,{name:"customer_invoice_after_discount",disabled:!0,value:f,label:"tlaftrdsnt",width:"13%"}),(0,h.jsx)(o.Z,{name:"customer_invoice_paid",value:u,label:"paid",max:f,onChange:N,width:"13%"}),(0,h.jsx)(o.Z,{name:"customer_invoice_credit",disabled:!0,value:k,label:"crdt",width:"13%"}),(0,h.jsx)(m.Z,{label:"sv",width:"15%",onClick:W})]})]})})},Z=(0,n.memo)(f)}}]);
//# sourceMappingURL=461.bc8ffec1.chunk.js.map